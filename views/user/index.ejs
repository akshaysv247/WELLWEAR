<!DOCTYPE html>
<html lang="en" class="darkmode" data-theme="light">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WEAR WELL FASHION STORE</title>
    <!--================= Favicon =================-->
    <link rel="apple-touch-icon" href="/images/fav.png">
    <link rel="shortcut icon" type="image/x-icon" href="/images/fav.png">
    <!--================= Bootstrap V5 CSS =================-->
    <link rel="stylesheet" type="text/css" href="/Stylesheets/bootstrap.min.css">
    <!--================= Font Awesome 5 CSS =================-->
    <link rel="stylesheet" type="text/css" href="/Stylesheets/all.min.css">
    <!--================= RT Icons CSS =================-->
    <link rel="stylesheet" type="text/css" href="/Stylesheets/rt-icons.css">
    <!--================= Animate css =================-->
    <link rel="stylesheet" type="text/css" href="/Stylesheets/animate.min.css">
    <!--================= Magnific popup Plugin =================-->
    <link rel="stylesheet" type="text/css" href="/Stylesheets/magnific-popup.css">
    <!--================= Swiper Slider Plugin =================-->
    <link rel="stylesheet" type="text/css" href="/Stylesheets/swiper-bundle.min.css">
    <!--================= Mobile Menu CSS =================-->
    <link rel="stylesheet" type="text/css" href="/Stylesheets/metisMenu.css">
    <!--================= Main Menu CSS =================-->
    <link rel="stylesheet" type="text/css" href="/Stylesheets/rtsmenu.css">
    <!--================= Preloader CSS =================-->
    <link rel="stylesheet" type="text/css" href="/Stylesheets/preloader.css">
    <!--================= Main Stylesheet =================-->
    <link rel="stylesheet" type="text/css" href="/Stylesheets/variables/variable1.css">
    <!--================= Main Stylesheet =================-->
    <link rel="stylesheet" type="text/css" href="/Stylesheets/main.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css"
        integrity="sha512-xh6O/CkQoPOWDdYTDqeRdPCVd1SpvCA9XXcUnZS2FmJNp1coAFzvtCN9BmamE+4aHK8yyUHUSCcJHgXloTyT2A=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>

<body>
    <%- include('partials/user-navbar.ejs') %>
        <!--================= Header Section End Here =================-->

        <!--================= Offer Section Start Here =================-->
        <div class="rts-offer-section">
            <div class="container">
                <div class="rts-offer-inner">
                    <p class="description">Super discount for your 100$ purchase. Use this code <a
                            href="/shop">OFFER100</a>
                    </p>
                </div>
            </div>
        </div>
        <!--================= Offer Section End Here =================-->

        <!--================= New Collection Section Start Here =================-->
        <div class="rts-new-collection-section section-gap">
            <div class="container">
                <div class="recent-products-header section-header">
                </div>
                <div class="swiper rts-cmmnSlider-over" data-swiper="pagination">
                    <div class="swiper-wrapper">
                        <% Categories.forEach(element=> { %>
                            <div class="swiper-slide">
                                <div class="collection-item">
                                    <a href="/category"><img src="/catImages/<%= element.thumbnail  %> "
                                            alt="collection-image">
                                    </a>
                                    <p class="item-quantity">20 <span>items</span></p>
                                    <a href="/category" class="item-catagory-box">
                                        <h3 class="title">
                                            <%= element.catName %>
                                        </h3>
                                    </a>
                                </div>
                            </div>
                            <% }); %>
                    </div>
                </div>
            </div>
        </div>
        <!--================= New Collection Section End Here =================-->

        <!--================= Hand Picked Section Start Here =================-->
        <div class="rts-hand-picked-products-section">
            <div class="container">
                <div class="section-header section-header3 text-center">
                    <div class="wrapper">
                        <div class="sub-content">
                            <img class="line-1" src="/images/banner/wvbo-icon.png" alt="">
                            <span class="sub-text">Featured</span>
                            <img class="line-2" src="/images/banner/wvbo-icon.png" alt="">
                        </div>
                        <h2 class="title">NEW PRODUCT</h2>
                    </div>
                </div>
                <div class="slider-div">
                    <div class="swiper rts-sixSlide-over">
                        <div class="swiper-wrapper">
                            <% Products.forEach(slide=>{ %>
                                <div class="swiper-slide">
                                    <div class="product-item element-item1">
                                        <a href="product-details?id=<%= slide._id %> "
                                            class="product-image image-hover-variations">
                                            <div class="image-vari1 image-vari"><img
                                                    src="/productImages/<%= slide.image[1] %> " alt="product-image">
                                            </div>
                                            <div class="image-vari2 image-vari"><img
                                                    src="/productImages/<%= slide.image[1] %> " alt="product-image">
                                            </div>
                                        </a>
                                        <div class="bottom-content">
                                            <a href="/product-details?id=<%= slide._id %> " class="product-name">
                                                <%= slide.title %>
                                            </a>
                                            <div class="action-wrap">
                                                <span class="price">
                                                    <%= slide.price %>.$
                                                </span>
                                            </div>
                                        </div>
                                        <div class="quick-action-button">
                                            <div class="cta-single cta-plus">
                                                <a href="#"><i class="rt-plus"></i></a>
                                            </div>
                                            <div class="cta-single cta-quickview">
                                                <button class="product-details-popup-btn"><i
                                                        class="far fa-eye"></i></button>
                                            </div>
                                            <div class="cta-single cta-wishlist" id="to-wishlist-btn<%= slide._id %>">
                                                <a onclick="addToWishlist('<%= slide._id %>')"><i
                                                        class="far fa-heart"></i></a>
                                            </div>
                                            <div class="cta-single cta-addtocart" id="to-cart-btn<%= slide._id %>">
                                                <a onclick="addToCart('<%= slide._id %>')"><i
                                                        class="fas fa-shopping-basket"></i></a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <% }) %>

                        </div>
                    </div>
                </div>
            </div>
        </div>
        </div>
        </div>

        <!--================= Hand Picked Section End Here =================-->

        <!--================= Featured Product Section Start Here =================-->
        <div class="rts-featured-product-section1">
            <div class="container">
                <div class="rts-featured-product-section-inner">
                    <div class="section-header section-header3 text-center">
                        <div class="wrapper">
                            <div class="sub-content">
                                <img class="line-1" src="/images/banner/wvbo-icon.png" alt="">
                                <span class="sub-text">Featured</span>
                                <img class="line-2" src="/images/banner/wvbo-icon.png" alt="">
                            </div>
                            <h2 class="title">FEATURED PRODUCT</h2>
                        </div>
                    </div>
                    <div class="row">
                        <%Products.forEach((pic)=>{ %>
                            <div class="col-xl-3 col-md-4 col-sm-6 col-12">
                                <div class="product-item element-item1">
                                    <a href="/product-details<%= pic._id %>" class="product-image image-hover-variations">
                                        <div class="image-vari1 image-vari"><img
                                                src="/productImages/<%= pic.image[1] %> " alt="product-image">
                                        </div>
                                        <div class="image-vari2 image-vari"><img
                                                src="/productImages/<%= pic.image[1] %> " alt="product-image">
                                        </div>
                                    </a>
                                    <div class="bottom-content">
                                        <div class="star-rating">
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star"></i>
                                        </div>
                                        <a href="/product-details?id=<%= pic._id %>" class="product-name">
                                            <%= pic.title %>
                                        </a>
                                        <div class="action-wrap">
                                            <span class="price">
                                                <%= pic.price %>.$
                                            </span>
                                        </div>
                                    </div>
                                    <div class="quick-action-button">
                                        <div class="cta-single cta-plus">
                                            <a href="#"><i class="rt-plus"></i></a>
                                        </div>
                                        <div class="cta-single cta-quickview">
                                            <button class="product-details-popup-btn"><i
                                                    class="far fa-eye"></i></button>
                                        </div>
                                        <div class="cta-single cta-wishlist" id="to-wishlist-btn<%=pic._id %>">
                                            <a onclick="addToWishlist('<%= pic._id %>')"><i class="far fa-heart"></i></a>
                                        </div>
                                        <div class="cta-single cta-addtocart" id="to-cart-btn<%= pic._id %>">
                                            <a onclick="addToCart('<%= pic._id %>')"><i
                                                    class="fas fa-shopping-basket"></i></a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <% }) %>

                    </div>
                </div>
            </div>
        </div>
        <script>
            async function addToWishlist(productId){
                console.log(productId)
                $.ajax({
                    url:`/add-wishlist?id=${productId}`,
                    method:'PATCH',
                    data:{
                        productId
                    },
                    success:(response)=>{
                        if(response.status==true){
                            const Toast=Swal.mixin({
                                toast:true,
                                psoition:'top-end',
                                showConfirmButton:false,
                                timer:3000,
                                timerProgressBar:true,
                                didOpen:(toast)=>{
                                    toast.addEventListener('mouseenter',Swal.stopTimer);
                                    toast.addEventListener('mouseleave',Swal.resumeTimer)
                                },
                            });
                            Toast.fire({
                                icon:'success',
                                title:'added to wishlist'
                            })
                        }
                        else if(response.status==true){

                            const Toast=Swal.fire({
                                toast:true,
                                position:top-end,
                                showConfirmButton:false,
                                timer:3000,
                                timerProgressBar:true,
                                didOpen:(toast)=>{
                                    toast.addEventListener('mouseenter',Swal.stopTimer);
                                    toast.addEventListener('mouseleave',Swal.resumeTimer);
                                },
                            })
                            Toast.fire({
                                icon:'success',
                                title:'Removed from wishlist'
                            })
                        }
                        else{
                            Swal.fire({
                                icon:'error',
                                title:'oops',
                                text:'Something went wrong'
                            })
                        }
                    }
                })
            }
            async function addToCart(productId) {
                console.log(productId)
                $.ajax({
                    url: `/add-cart?id=${productId}`,
                    method: 'PATCH',
                    data: {
                        productId,
                    },
                    success: (response) => {
                        if (response.status == true) {
                            const Toast = Swal.mixin({
                                toast: true,
                                position: 'top-end',
                                showConfirmButton: false,
                                timer: 2000,
                                timerProgressBar: true,
                                didOpen: (toast) => {
                                    toast.addEventListner('mouseenter', Swal.stopTimer);
                                    toast.addEventListner('mouseleave', Swal.resumeTimer);
                                },
                            });
                            Toast.fire({
                                icon: 'success',
                                title: 'added to cart',
                            });
                            console.log(response)
                        } else if (response.status == "already") {
                            const Toast = Swal.mixin({
                                toast: true,
                                position: 'top-end',
                                showConfirmButton: false,
                                timer: 2000,
                                timerProgressBar: true,
                                didOpen: (toast) => {
                                    toast.addEventListener('mouseenter', Swal.stopTimer)
                                    toast.addEventListener('mouseleave', Swal.resumeTimer)
                                }
                            })
                            Toast.fire({
                                icon:'success',
                                title:'already exist in cart',
                            })
                        }else if(response.outOfStock){
                            const Toast = Swal.mixin({
                                toast: true,
                                position: 'top-end',
                                showConfirmButton: false,
                                timer: 2000,
                                timerProgressBar: true,
                                didOpen: (toast) => {
                                    toast.addEventListener('mouseenter', Swal.stopTimer)
                                    toast.addEventListener('mouseleave', Swal.resumeTimer)
                                }
                            })
                            Toast.fire({
                                icon: 'error',
                                title:'oops',
                                text: 'Product is out off stock',
                            })
                        }
                        else{
                            Swal.fire({
                                icon:'error',
                                title:'Oops',
                                text:'something went wrong'
                            })

                        }
                    }
                })
            }
        </script>
        <!--================= Featured Product Section End Here =================-->
        <!--================= Newsletter Popup Start Here =================-->
        <% if(!user){ %>
            <div class="anywere anywere-home"></div>
            <div class="rts-newsletter-popup">
                <div class="newsletter-close-btn"><i class="fal fa-times"></i></div>
                <div class="newsletter-inner">
                    <h3 class="newsletter-heading">Please Register</h3>
                    <p style="color:black">If You are not a part of this team we recoment that you should consider to
                        join us</p>
                    <form><a href="/signup"><button type="button" style="width:250px" class="subscribe-btn">SIGN
                                UP</button></a>
                        <a href="/user-log"> <button type="button" style="width:250px" class="subscribe-btn">LOG IN
                            </button></a>
                    </form>
                </div>
            </div>
            <% } %>

              
                <!--================= Product-details Section End Here =================-->
                <%- include('partials/user-footer.ejs') %>


                    <!--================= Scroll to Top Start =================-->
                    <div class="scroll-top-btn scroll-top-btn1">
                        <i class="fas fa-angle-up arrow-up"></i>
                        <i class="fas fa-circle-notch"></i>
                    </div>
                    <!--================= Scroll to Top End =================-->

                    <!--================= Jquery latest version =================-->
                    <script src="/js/vendors/jquery-3.6.0.min.js"></script>
                    <!--================= Bootstrap latest version =================-->
                    <script src="/js/vendors/bootstrap.min.js"></script>
                    <!--================= Wow.js =================-->
                    <script src="/js/vendors/wow.min.js"></script>
                    <!--================= Swiper Slider =================-->
                    <script src="/js/vendors/swiper-bundle.min.js"></script>
                    <!--================= Nice Select =================-->
                    <script src="/js/vendors/jquery.nice-select.js"></script>
                    <!--================= Zoom Plugin =================-->
                    <script src="/js/vendors/zoom.js"></script>
                    <!--================= metisMenu Plugin =================-->
                    <script src="/js/vendors/metisMenu.min.js"></script>
                    <!--================= Main Menu Plugin =================-->
                    <script src="/js/vendors/rtsmenu.js"></script>
                    <!--================= Magnefic Popup Plugin =================-->
                    <script src="/js/vendors/isotope.pkgd.min.js"></script>
                    <!--================= Magnefic Popup Plugin =================-->
                    <script src="/js/vendors/jquery.magnific-popup.min.js"></script>
                    <!--================= Main Script =================-->
                    <script src="/js/main.js"></script>
                    <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
                    <script src="/js/search.js"></script>

</body>

</html>